<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1"><title>model_oss/fvlm/dockerfile/jax_fvlm_model_conversion.Dockerfile - automl-vision-eng-team/vertex-vision-train-docker - Git at Google</title><link rel="stylesheet" type="text/css" href="/+static/base.css"><link rel="stylesheet" type="text/css" href="/+static/prettify/prettify.css"><!-- default customHeadTagPart --></head><body class="Site"><header class="Site-header"><div class="Header"><a class="Header-image" href="/"><img src="//www.gstatic.com/images/branding/lockups/2x/lockup_git_color_108x24dp.png" width="108" height="24" alt="Google Git"></a><div class="Header-menu"> <a class="Header-menuItem" href="https://accounts.google.com/AccountChooser?faa=1&amp;service=gerritcodereview&amp;continue=https://team.git.corp.google.com/login/automl-vision-eng-team/vertex-vision-train-docker/%2B/refs/heads/main/model_oss/fvlm/dockerfile/jax_fvlm_model_conversion.Dockerfile">Switch user</a> <a class="Header-menuItem" href="/automl-vision-eng-team/vertex-vision-train-docker/+/refs/heads/main/model_oss/fvlm/dockerfile/jax_fvlm_model_conversion.Dockerfile?switch-account=prod">Switch to @prod.google.com</a> <a class="Header-menuItem" href="https://team.git.corp.google.com/+logout?continue=/automl-vision-eng-team/vertex-vision-train-docker/%2B/refs/heads/main/model_oss/fvlm/dockerfile/jax_fvlm_model_conversion.Dockerfile">Sign out</a> <span class="Header-menuItem Header-menuItem--noAction">‪Minwoo Park‬ &lt;minwoopark@google.com&gt;</span> </div></div></header><div class="Site-content"><div class="Container "><div class="Breadcrumbs"><a class="Breadcrumbs-crumb" href="/?format=HTML">team</a> / <a class="Breadcrumbs-crumb" href="/automl-vision-eng-team/">automl-vision-eng-team</a> / <a class="Breadcrumbs-crumb" href="/automl-vision-eng-team/vertex-vision-train-docker/">vertex-vision-train-docker</a> / <a class="Breadcrumbs-crumb" href="/automl-vision-eng-team/vertex-vision-train-docker/+/refs/heads/main">refs/heads/main</a> / <a class="Breadcrumbs-crumb" href="/automl-vision-eng-team/vertex-vision-train-docker/+/refs/heads/main/">.</a> / <a class="Breadcrumbs-crumb" href="/automl-vision-eng-team/vertex-vision-train-docker/+/refs/heads/main/model_oss">model_oss</a> / <a class="Breadcrumbs-crumb" href="/automl-vision-eng-team/vertex-vision-train-docker/+/refs/heads/main/model_oss/fvlm?autodive=0">fvlm</a> / <a class="Breadcrumbs-crumb" href="/automl-vision-eng-team/vertex-vision-train-docker/+/refs/heads/main/model_oss/fvlm/dockerfile">dockerfile</a> / <span class="Breadcrumbs-crumb">jax_fvlm_model_conversion.Dockerfile</span></div><div class="u-sha1 u-monospace BlobSha1">blob: 70624b9b7c275f14606efea4ffc49a494a51f35a [<a href="/automl-vision-eng-team/vertex-vision-train-docker/+/refs/heads/main/model_oss/fvlm/dockerfile/jax_fvlm_model_conversion.Dockerfile">file</a>] [<a href="/automl-vision-eng-team/vertex-vision-train-docker/+log/refs/heads/main/model_oss/fvlm/dockerfile/jax_fvlm_model_conversion.Dockerfile">log</a>] [<a href="/automl-vision-eng-team/vertex-vision-train-docker/+blame/refs/heads/main/model_oss/fvlm/dockerfile/jax_fvlm_model_conversion.Dockerfile">blame</a>]</div><table class="FileContents"><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="1"></td><td class="FileContents-lineContents" id="1"><span class="com"># This Dockerfile converts JAX vision transformer model to</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="2"></td><td class="FileContents-lineContents" id="2"><span class="com"># tensorflow saved model format.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="3"></td><td class="FileContents-lineContents" id="3"><span class="com"># Here is an example to build this dockerfile:</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="4"></td><td class="FileContents-lineContents" id="4"><span class="com"># PROJECT=&quot;your gcp project&quot;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="5"></td><td class="FileContents-lineContents" id="5"><span class="com"># IMAGE_TAG=&quot;jax-f-vlm-model-conversion:${USER}-test&quot;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="6"></td><td class="FileContents-lineContents" id="6"><span class="com"># docker build -f model_oss/fvlm/dockerfile/jax_fvlm_model_conversion.Dockerfile . -t &quot;${IMAGE_TAG}&quot;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="7"></td><td class="FileContents-lineContents" id="7"><span class="com"># docker tag &quot;${IMAGE_TAG}&quot; &quot;gcr.io/${PROJECT}/${IMAGE_TAG}&quot;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="8"></td><td class="FileContents-lineContents" id="8"><span class="com"># docker push &quot;gcr.io/${PROJECT}/${IMAGE_TAG}&quot;</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="9"></td><td class="FileContents-lineContents" id="9"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="10"></td><td class="FileContents-lineContents" id="10"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="11"></td><td class="FileContents-lineContents" id="11"><span class="com"># See https://cloud.google.com/tensorflow-enterprise/docs/overview for details.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="12"></td><td class="FileContents-lineContents" id="12"><span class="pln">FROM gcr</span><span class="pun">.</span><span class="pln">io</span><span class="pun">/</span><span class="pln">deeplearning</span><span class="pun">-</span><span class="pln">platform</span><span class="pun">-</span><span class="pln">release</span><span class="pun">/</span><span class="pln">tf2</span><span class="pun">-</span><span class="pln">gpu</span><span class="pun">.</span><span class="lit">2</span><span class="pun">-</span><span class="lit">12.py310</span><span class="pun">:</span><span class="pln">m110</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="13"></td><td class="FileContents-lineContents" id="13"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="14"></td><td class="FileContents-lineContents" id="14"><span class="pln">ENV DEBIAN_FRONTEND</span><span class="pun">=</span><span class="pln">noninteractive</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="15"></td><td class="FileContents-lineContents" id="15"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="16"></td><td class="FileContents-lineContents" id="16"><span class="com"># Install basic libs</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="17"></td><td class="FileContents-lineContents" id="17"><span class="pln">RUN apt</span><span class="pun">-</span><span class="kwd">get</span><span class="pln"> update </span><span class="pun">&amp;&amp;</span><span class="pln"> apt</span><span class="pun">-</span><span class="kwd">get</span><span class="pln"> install </span><span class="pun">-</span><span class="pln">y </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">install</span><span class="pun">-</span><span class="pln">recommends \</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="18"></td><td class="FileContents-lineContents" id="18"><span class="pln">        cmake \</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="19"></td><td class="FileContents-lineContents" id="19"><span class="pln">        curl \</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="20"></td><td class="FileContents-lineContents" id="20"><span class="pln">        wget \</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="21"></td><td class="FileContents-lineContents" id="21"><span class="pln">        sudo \</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="22"></td><td class="FileContents-lineContents" id="22"><span class="pln">        gnupg \</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="23"></td><td class="FileContents-lineContents" id="23"><span class="pln">        libsm6 \</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="24"></td><td class="FileContents-lineContents" id="24"><span class="pln">        libxext6 \</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="25"></td><td class="FileContents-lineContents" id="25"><span class="pln">        libxrender</span><span class="pun">-</span><span class="pln">dev \</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="26"></td><td class="FileContents-lineContents" id="26"><span class="pln">        lsb</span><span class="pun">-</span><span class="pln">release \</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="27"></td><td class="FileContents-lineContents" id="27"><span class="pln">        ca</span><span class="pun">-</span><span class="pln">certificates \</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="28"></td><td class="FileContents-lineContents" id="28"><span class="pln">        build</span><span class="pun">-</span><span class="pln">essential \</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="29"></td><td class="FileContents-lineContents" id="29"><span class="pln">        git \</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="30"></td><td class="FileContents-lineContents" id="30"><span class="pln">        subversion</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="31"></td><td class="FileContents-lineContents" id="31"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="32"></td><td class="FileContents-lineContents" id="32"><span class="com"># Copy Apache license.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="33"></td><td class="FileContents-lineContents" id="33"><span class="pln">RUN wget https</span><span class="pun">:</span><span class="com">//raw.githubusercontent.com/GoogleCloudPlatform/vertex-ai-samples/main/LICENSE</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="34"></td><td class="FileContents-lineContents" id="34"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="35"></td><td class="FileContents-lineContents" id="35"><span class="com"># Install required libs</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="36"></td><td class="FileContents-lineContents" id="36"><span class="pln">RUN pip install </span><span class="pun">--</span><span class="pln">upgrade pip</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="37"></td><td class="FileContents-lineContents" id="37"><span class="com"># The following pip installs are pinned down versions satisfying</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="38"></td><td class="FileContents-lineContents" id="38"><span class="com"># fvlm/requirements.txt file.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="39"></td><td class="FileContents-lineContents" id="39"><span class="com"># NOTE: Using `no-deps` flag to avoid overwriting of</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="40"></td><td class="FileContents-lineContents" id="40"><span class="com"># dependent library versions. For example,</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="41"></td><td class="FileContents-lineContents" id="41"><span class="com"># both `chex` and `jax` can overwrite each others</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="42"></td><td class="FileContents-lineContents" id="42"><span class="com"># `jax-lib` version.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="43"></td><td class="FileContents-lineContents" id="43"><span class="com"># Get F-VLM repository by using svn to avoid downloading entire google-research repository.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="44"></td><td class="FileContents-lineContents" id="44"><span class="com"># Using the revision 60422 at 2023-08-22 21:04:59 +0000.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="45"></td><td class="FileContents-lineContents" id="45"><span class="pln">RUN svn </span><span class="kwd">export</span><span class="pln"> </span><span class="pun">-</span><span class="pln">r </span><span class="lit">60422</span><span class="pln"> https</span><span class="pun">:</span><span class="com">//github.com/google-research/google-research/trunk/fvlm</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="46"></td><td class="FileContents-lineContents" id="46"><span class="com"># Note: The following libraries are pinned down versions of:</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="47"></td><td class="FileContents-lineContents" id="47"><span class="com"># https://github.com/google-research/google-research/blob/master/fvlm/requirements.txt</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="48"></td><td class="FileContents-lineContents" id="48"><span class="pln">RUN pip install </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">cache</span><span class="pun">-</span><span class="pln">dir tensorflow</span><span class="pun">==</span><span class="lit">2.12</span><span class="pun">.</span><span class="lit">0</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="49"></td><td class="FileContents-lineContents" id="49"><span class="pln">RUN pip install </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">cache</span><span class="pun">-</span><span class="pln">dir tensorflow</span><span class="pun">-</span><span class="pln">datasets</span><span class="pun">==</span><span class="lit">4.9</span><span class="pun">.</span><span class="lit">2</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="50"></td><td class="FileContents-lineContents" id="50"><span class="pln">RUN pip install </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">cache</span><span class="pun">-</span><span class="pln">dir numpy</span><span class="pun">==</span><span class="lit">1.23</span><span class="pun">.</span><span class="lit">5</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="51"></td><td class="FileContents-lineContents" id="51"><span class="pln">RUN pip install </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">cache</span><span class="pun">-</span><span class="pln">dir torch</span><span class="pun">==</span><span class="lit">2.0</span><span class="pun">.</span><span class="lit">1</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="52"></td><td class="FileContents-lineContents" id="52"><span class="pln">RUN pip install </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">cache</span><span class="pun">-</span><span class="pln">dir torchvision</span><span class="pun">==</span><span class="lit">0.15</span><span class="pun">.</span><span class="lit">2</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="53"></td><td class="FileContents-lineContents" id="53"><span class="pln">RUN pip install </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">cache</span><span class="pun">-</span><span class="pln">dir opencv</span><span class="pun">-</span><span class="pln">python</span><span class="pun">==</span><span class="lit">4.7</span><span class="pun">.</span><span class="lit">0.72</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="54"></td><td class="FileContents-lineContents" id="54"><span class="pln">RUN pip install </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">cache</span><span class="pun">-</span><span class="pln">dir tqdm</span><span class="pun">==</span><span class="lit">4.65</span><span class="pun">.</span><span class="lit">0</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="55"></td><td class="FileContents-lineContents" id="55"><span class="pln">RUN pip install </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">cache</span><span class="pun">-</span><span class="pln">dir git</span><span class="pun">+</span><span class="pln">https</span><span class="pun">:</span><span class="com">//github.com/openai/CLIP.git@a1d071733d7111c9c014f024669f959182114e33</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="56"></td><td class="FileContents-lineContents" id="56"><span class="pln">RUN pip install </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">cache</span><span class="pun">-</span><span class="pln">dir </span><span class="typ">Pillow</span><span class="pun">==</span><span class="lit">9.5</span><span class="pun">.</span><span class="lit">0</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="57"></td><td class="FileContents-lineContents" id="57"><span class="pln">RUN pip install </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">cache</span><span class="pun">-</span><span class="pln">dir orbax</span><span class="pun">-</span><span class="pln">checkpoint</span><span class="pun">==</span><span class="lit">0.3</span><span class="pun">.</span><span class="lit">3</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="58"></td><td class="FileContents-lineContents" id="58"><span class="pln">RUN pip install </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">cache</span><span class="pun">-</span><span class="pln">dir gin</span><span class="pun">-</span><span class="pln">config</span><span class="pun">==</span><span class="lit">0.5</span><span class="pun">.</span><span class="lit">0</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="59"></td><td class="FileContents-lineContents" id="59"><span class="pln">RUN pip install </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">cache</span><span class="pun">-</span><span class="pln">dir pycocotools</span><span class="pun">==</span><span class="lit">2.0</span><span class="pun">.</span><span class="lit">6</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="60"></td><td class="FileContents-lineContents" id="60"><span class="pln">RUN pip install </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">cache</span><span class="pun">-</span><span class="pln">dir contextlib2</span><span class="pun">==</span><span class="lit">21.6</span><span class="pun">.</span><span class="lit">0</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="61"></td><td class="FileContents-lineContents" id="61"><span class="pln">RUN pip install </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">cache</span><span class="pun">-</span><span class="pln">dir ml</span><span class="pun">-</span><span class="pln">collections</span><span class="pun">==</span><span class="lit">0.1</span><span class="pun">.</span><span class="lit">1</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="62"></td><td class="FileContents-lineContents" id="62"><span class="pln">RUN pip install </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">cache</span><span class="pun">-</span><span class="pln">dir chex</span><span class="pun">==</span><span class="lit">0.1</span><span class="pun">.</span><span class="lit">7</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="63"></td><td class="FileContents-lineContents" id="63"><span class="pln">RUN pip install </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">cache</span><span class="pun">-</span><span class="pln">dir optax</span><span class="pun">==</span><span class="lit">0.1</span><span class="pun">.</span><span class="lit">5</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="64"></td><td class="FileContents-lineContents" id="64"><span class="com"># Dependencies already included. Use no-deps to not update numpy.</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="65"></td><td class="FileContents-lineContents" id="65"><span class="pln">RUN pip install </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">cache</span><span class="pun">-</span><span class="pln">dir </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">deps flax</span><span class="pun">==</span><span class="lit">0.7</span><span class="pun">.</span><span class="lit">2</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="66"></td><td class="FileContents-lineContents" id="66"><span class="pln">RUN pip install </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">cache</span><span class="pun">-</span><span class="pln">dir </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">deps clu</span><span class="pun">==</span><span class="lit">0.0</span><span class="pun">.</span><span class="lit">9</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="67"></td><td class="FileContents-lineContents" id="67"><span class="pln">RUN pip install </span><span class="pun">--</span><span class="kwd">no</span><span class="pun">-</span><span class="pln">cache</span><span class="pun">-</span><span class="pln">dir jax</span><span class="pun">[</span><span class="pln">cuda11_cudnn86</span><span class="pun">]==</span><span class="lit">0.4</span><span class="pun">.</span><span class="lit">9</span><span class="pln"> \</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="68"></td><td class="FileContents-lineContents" id="68"><span class="pun">--</span><span class="pln">find</span><span class="pun">-</span><span class="pln">links https</span><span class="pun">:</span><span class="com">//storage.googleapis.com/jax-releases/jax_cuda_releases.html</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="69"></td><td class="FileContents-lineContents" id="69"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="70"></td><td class="FileContents-lineContents" id="70"><span class="pln">WORKDIR </span><span class="pun">./</span><span class="pln">fvlm</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="71"></td><td class="FileContents-lineContents" id="71"><span class="pln">ENV PYTHONPATH </span><span class="pun">./</span></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="72"></td><td class="FileContents-lineContents" id="72"></td></tr><tr class="u-pre u-monospace FileContents-line"><td class="u-lineNum u-noSelect FileContents-lineNum" data-line-number="73"></td><td class="FileContents-lineContents" id="73"><span class="pln">ENTRYPOINT </span><span class="pun">[</span><span class="str">&quot;python&quot;</span><span class="pun">,</span><span class="pln"> </span><span class="str">&quot;export_saved_model.py&quot;</span><span class="pun">]</span></td></tr></table><script nonce="zqcRf96fzFK_nck4QtUX5A">for (let lineNumEl of document.querySelectorAll('td.u-lineNum')) {lineNumEl.onclick = () => {window.location.hash = `#${lineNumEl.getAttribute('data-line-number')}`;};}</script></div> <!-- Container --></div> <!-- Site-content --><footer class="Site-footer"><div class="Footer"><span class="Footer-poweredBy">Powered by <a href="https://gerrit.googlesource.com/gitiles/">Gitiles</a>| <a href="https://policies.google.com/privacy">Privacy</a>| <a href="https://policies.google.com/terms">Terms</a></span><span class="Footer-formats"><a class="u-monospace Footer-formatsItem" href="?format=TEXT">txt</a> <a class="u-monospace Footer-formatsItem" href="?format=JSON">json</a></span></div></footer></body></html>